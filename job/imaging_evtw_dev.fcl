#include "imaging_selection.fcl"
#include "microboone_eventweight_service.fcl"
#include "seedservice_microboone.fcl"
#include "eventweight_microboone_sep24.fcl"

process_name: ImagingEvtwDev

services.TFileService.fileName: "imaging_evtw_dev.root"
services.UBEventWeight:      @local::microboone_eventweight_service
services.NuRandomService:    @local::microboone_seedservice
services.G4RWManagerService: @local::microboone_g4rw_manager

physics.producers.eventweightSep24: @local::microboone_eventweight_sep24

physics.producers.inferenceprod: {
  module_type: "InferenceProducer"
  PlanesTag: "imageprod:NuSlice"
  ScratchDir: ""
  AssetsBaseDir: "assets"
  DefaultWrapper: "scripts/inference_wrapper.sh"
  Models: [
    {
      Label:   "mink_binary"
      Arch:    "binary:device=cpu,seed=12345,thr=0.0"
      Weights: "random://weights"
    }
  ]
}

physics.filters.nuselection: {
  @table::NeutrinoSelectionFilter
}

physics.path1: [ eventweightSep24, imageprod, inferenceprod, nuselection ]
physics.trigger_paths: [ path1 ]

EventWeightAnalysisDev: {
  @table::EventWeightAnalysis
  genieAllUniverses: 100
  eventWeightProcessName00: "ImagingEvtwDev"
}

NeutrinoSelectionFilter.AnalysisTools.weight: @local::EventWeightAnalysisDev
