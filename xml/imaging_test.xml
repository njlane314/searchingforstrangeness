<?xml version="1.0"?>

<!DOCTYPE project [
    <!ENTITY release "v08_00_00_82">
    <!ENTITY user    "nlane">
    <!ENTITY name    "imaging_test">

    <!-- FHiCL & init script -->
    <!ENTITY fcl_imaging "job/run_imaging.fcl">
    <!ENTITY initsrc    "assets/scripts/initsrc.sh">

    <!-- larsoft tarball -->
    <!ENTITY tar_dir    "/pnfs/uboone/scratch/users/nlane/tarballs">
    <!ENTITY larsoft_tar "&tar_dir;/strangeness.tar">

    <!-- SAM dataset to test on (change this to whatever you want) -->
    <!ENTITY input_test "prod_strange_resample_fhc_run2_fhc_reco2_reco2">
]>

<job>
<project name="&name;">

    <numevents>-1</numevents>
    <os>SL7</os>
    <resource>DEDICATED,OPPORTUNISTIC,OFFSITE</resource>

    <larsoft>
        <tag>&release;</tag>
        <qual>e17:prof</qual>
        <local>&larsoft_tar;</local>
    </larsoft>

    <check>1</check>
    <copy>0</copy>
    <version>prod_&release;</version>
    <memory>4000</memory>
    <disk>20GB</disk>
    <schema>https</schema>
    <maxfilesperjob>1</maxfilesperjob>

    <!-- Single test stage that runs run_imaging.fcl -->
    <stage name="imaging_test">
        <inputdef>&input_test;</inputdef>
        <fcl>&fcl_imaging;</fcl>
        <initsource>&initsrc;</initsource>

        <outdir>/pnfs/uboone/scratch/users/&user;/imaging/&release;/&name;/out</outdir>
        <logdir>/pnfs/uboone/scratch/users/&user;/imaging/&release;/&name;/log</logdir>
        <workdir>/pnfs/uboone/scratch/users/&user;/work/imaging/&release;/&name;</workdir>

        <datatier>analysis</datatier>
        <numjobs>100</numjobs>
    </stage>

</project>
</job>
